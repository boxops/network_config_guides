{
    "Dhcp4": {
        "interfaces-config": {
            "interfaces": [
                "ens192",
                "ens160"
            ],
            "dhcp-socket-type": "raw"
        },
        "control-socket": {
            "socket-type": "unix",
            "socket-name": "/tmp/kea4-ctrl-socket"
        },
        // "lease-database": {
        //     "type": "memfile",
        //     "persist": true,
        //     "lfc-interval": 3600
        // },
        "lease-database": {
            "type": "postgresql",
            "name": "dhcp",
            "host": "localhost",
            "port": 5432,
            "user": "admin",
            "password": "J56f5kcQMo8IiIEkFz5w!",
            "reconnect-wait-time": 3000,
            "max-reconnect-tries": 3,
            "on-fail": "stop-retry-exit",
            "connect-timeout": 3
        },
        "expired-leases-processing": {
            "reclaim-timer-wait-time": 10,
            "flush-reclaimed-timer-wait-time": 25,
            "hold-reclaimed-time": 3600,
            "max-reclaim-leases": 100,
            "max-reclaim-time": 250,
            "unwarned-reclaim-cycles": 5
        },
        "renew-timer": 150,
        "rebind-timer": 300,
        "valid-lifetime": 600,
        "hooks-libraries": [
            {
                "library": "/usr/lib/x86_64-linux-gnu/kea/hooks/libdhcp_stat_cmds.so",
                "parameters": {}
            },
            {
                "library": "/usr/lib/x86_64-linux-gnu/kea/hooks/libdhcp_lease_cmds.so",
                "parameters": {}
            },
            {
                "library": "/usr/lib/x86_64-linux-gnu/kea/hooks/libdhcp_ha.so",
                "parameters": {
                    "high-availability": [
                        {
                            "this-server-name": "lab-dhcp-primary",
                            "mode": "load-balancing",
                            "heartbeat-delay": 10000,
                            "max-response-delay": 60000,
                            "max-ack-delay": 5000,
                            "max-unacked-clients": 5,
                            "delayed-updates-limit": 100,
                            "peers": [
                                {
                                    "name": "lab-dhcp-primary",
                                    "url": "http://192.168.30.29:8000/",
                                    "role": "primary",
                                    "auto-failover": true
                                },
                                {
                                    "name": "lab-dhcp-secondary",
                                    "url": "http://192.168.30.32:8000/",
                                    "role": "secondary",
                                    "auto-failover": true
                                }
                            ]
                        }
                    ]
                }
            }
        ],
        "option-data": [
            {
                "name": "domain-name-servers",
                "data": "192.168.20.10, 192.168.100.3"
            },
            {
                "name": "domain-name",
                "data": "hikinginmaine.com"
            }
        ],
        "subnet4": [
            {
                "subnet": "192.168.20.0/24",
                "pools": [
                    {
                        "pool": "192.168.20.1-192.168.20.127",
                        "client-class": "HA_lab-dhcp-primary"
                    },
                    {
                        "pool": "192.168.20.128-192.168.20.253",
                        "client-class": "HA_lab-dhcp-secondary"
                    }
                ],
                // These are options that are subnet specific. In most cases,
                // you need to define at least routers option, as without this
                // option your clients will not be able to reach their default
                // gateway and will not have Internet connectivity.
                "option-data": [
                    {
                        // For each IPv4 subnet you most likely need to specify at
                        // least one router.
                        "name": "routers",
                        "data": "192.168.20.254"
                    }
                ],
                // This subnet will be selected for queries coming from the following
                // IP address.
                // "relay": {
                //     "ip-address": "192.168.56.1"
                // },
                "reservations": [
                    {
                        "hw-address": "D4:81:D7:6D:03:00",
                        "ip-address": "192.168.20.50"
                    },
                    {
                        "hw-address": "24:01:C7:21:AD:C1",
                        "ip-address": "192.168.20.130"
                    }
                ]
            },
            {
                "subnet": "192.168.100.0/23",
                "pools": [
                    {
                        "pool": "192.168.100.1-192.168.100.255",
                        "client-class": "HA_lab-dhcp-primary"
                    },
                    {
                        "pool": "192.168.101.0-192.168.101.253",
                        "client-class": "HA_lab-dhcp-secondary"
                    }
                ],
                // This subnet will be selected for queries coming from the following
                // IP address.
                // "relay": {
                //     "ip-address": "192.168.56.1"
                // },
                "option-data": [
                    {
                        "name": "routers",
                        "data": "192.168.101.254"
                    }
                ]
            }
        ],
        "loggers": [
            {
                "name": "kea-dhcp4",
                "output_options": [
                    {
                        "output": "stdout",
                        "pattern": "%-5p %m\n"
                    }
                ],
                "severity": "INFO",
                "debuglevel": 0
            }
        ]
    }
}
