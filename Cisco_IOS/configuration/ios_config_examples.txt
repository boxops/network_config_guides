### Cisco_IOS ###


### Configure Hostname

conf t
hostname R1
do sh run | inc host


### Configure Interface with IP address

interface FastEthernet0/0
ip address 10.1.1.1 255.255.255.0
no shutdown


### Set Up an IOS Router or Switch as SSH Client

# There are four steps required to enable SSH support on a Cisco IOS:

# 1. Configure the hostname command.
# 2. Configure the DNS domain.
# 3. Generate the SSH key to be used.
# 4. Enable SSH transport support for the virtual type terminal (vtys).

configure terminal
hostname R1
ip domain name cisco.com
username admin privilege 15 password Cisco123
line con 0
password cisco
login
exit
line vty 0 4
password cisco
login local
logging synchronous
transport input all
exit
line vty 5 15
password cisco
login local
logging synchronous
transport input all
exit
crypto key generate rsa
1024
ip ssh version 2
banner motd # Unauthorised access is strictly prohibited! #
end
wr


### Standard ACL

# access-list number { deny | permit } ip wildcard-mask
access-list 1 deny 1.1.1.1 0.0.0.0
access-list 1 deny 1.1.1.1
access-list 1 deny host 1.1.1.1
access-list 1 permit any
access-list 1 permit 0.0.0.0 255.255.255.255
access-list 1 remark ## BLOCK PERSON FROM ACCOUNTING ##

show access-lists
show ip access-lists

# Permit a single host from a subnet
access-list 1 permit 192.168.1.1
access-list 1 deny 192.168.1.0 0.0.0.255
interface g0/1
ip access-group 1 out

# Named ACL
ip access-list standard { acl-name }
[ entry number ] { deny | permit } ip wildcard-mask


### Better ACL Config

# Standard ACL
# Numbered ACL Ranges: 100-199, 2000-2699

ip access-list standard 1
# or
ip access-list standard BLOCK_PC1
deny 192.168.1.1
permit any
do show access list
# delete an entry
no 30

# insert a new entry by specifying the sequence number
30 deny 192.168.2.0 0.0.0.255

# resequence ACLs
# ip access-list resequence [acl-id] [starting-seq-num] [increment]
# [starting-seq-num] = change the sequence number of the first entry to 10
# [increment] = add 10 for every entry after that
ip access-list resequence 1 10 10

# NOTE - When configuring or editing numbered ACLs from global config mode,
# you cannot delete individual entries, you can only delete the entire ACL!


### Extended ACLs

# Extendend Numbered ACL
# access-list [number] (permit | deny) [protocol] [src-ip] [dest-ip]

# Extended Named ACL
# ip access-list extended (name | number)
# [seq-num] (permit | deny) [protocol] [src-ip] [dest-ip]
ip acccess-list extended DENY_VLAN10
deny tcp any 10.0.0.0 0.0.0.255

# examples
# allow all traffic
permit ip any any
# prevent 10.0.0.0/16 from sending UDP traffic to 192.168.1.1/32
deny udp 10.0.0.0 0.0.255.255 host 192.168.1.1
# prevent 172.16.1.1/32 from pinging hosts in 192.168.0.0/24
deny icmp host 172.16.1.1 192.168.0.0 0.0.0.255
# When matching TCP or UDP, you can optionally specify the source and/or destination port numbers to match
deny tcp [src-ip] eq [src-port-num] [dest-ip]
deny tcp 10.1.1.1 eq 80 10.2.2.2
# eq 80 = equal to port 80
# gt 80 = greater than 80 (<81)
# lt 80 = less than 80 (>79)
# neq 80 = NOT 80
# range 80 100 = port from 80 to port 100

# After the destination IP address and/or port numbers, there are more options you can use to match
# ack = match TCP ACK flag
# fin = match TCP FIN flag
# syn = match TCP SYN flag
# ttl = match packets with a specific TTL value
# dscp = match packets with a specific DSCP value

# examples
# allow traffic from 10.0.0.0/16 to access the server at 2.2.2.2/32 using HTTPS
permit tcp 10.0.0.0 0.0.255.255 2.2.2.2 0.0.0.0 eq 443
# prevent all hosts using source UDP port numbers from 20000 to 30000 from accessing the server at 3.3.3.3/32
deny udp any range 20000 30000 host 3.3.3.3
# allow hosts in 172.16.1.0/24 using a TCP source port greater than 9999 to access all TCP ports on server 4.4.4.4/32 except port 23
permit tcp 172.16.1.0 0.0.0.255 gt 9999 host 4.4.4.4 neq 23


### Static Routing

# ip route [ remote network ] [ remote network subnet ] [ neighbour interface ]
ip route 10.1.1.0 255.255.255.0 10.1.2.1

### OSPF Dynamic Routing

OSPF Neighbour Requirements

1. Area must match
2. Area must be in the same subnet
3. OSPF process must not be sutdown
4. OSPF Router IDs must be unique
5. Hello and Dead timers must match
6. Autohentication settings must match
7. IP MTU settings must match
8. OSPF Network Type must match


OSPF Types of LSA

Type 1 (Router LSA)
- Every OSPF rotuer generates this type of LSA.
- It identifies the router using its router ID.
- It also lists networks attached to the rotuer's OSPF-activated interfaces.

Type 2 (Network LSA)
- Generated by the DR of each 'multi-access' network (ie. the broadcast network type).
- Lists the routers which are attached to the multi-access network.

Type 5 (AS External LSA)
- Generated by ASBRs to describe routes to destinations outside of the AS (OSPF domain).


### Subinterfaces for Router on a Stick

# On R1
int g0/0.10
encapsulation dot1Q 10
ip address 10.0.0.62 255.255.255.192

int g0/0.20
encapsulation dot1Q 20
ip address 10.0.0.216 255.255.255.192

# On SW1
int g0/0
switchport mode trunk
exit
vlan 10
name VLAN-A
vlan 20
name VLAN-B
int f0/1
switchport mode access
switchport access vlan 10
exit
int f0/2
switchport mode access
switchport access vlan 20
exit

show vlans


### Etherchannel

# LACP SW1
int range g0/1-2
channel-group 1 mode active
exit
int po1
switchport trunk encapsulation dot1q
switchport mode trunk

# LACP SW2
int range g0/3-4
channel-group 1 mode active
exit
int po1
switchport trunk encapsulation dot1q
switchport mode trunk

# Static Etherchannel
# DSW1
int range g0/1-2
no switchport
channel-group 2 mode on
int po2
ip add 10.0.0.1 255.255.255.252

# DSW2
int range g0/1-2
no switchport
channel-group 2 mode on
int po2
ip add 10.0.0.2 255.255.255.252

show etherchannel summary

# Etherchannel load-balance
port-channel load-balance src-dst-ip

show etherchannel load-balance


### HSRP

# R1
int g0/0
standby version 2
standby 1 ip 10.0.1.254
standby 1 pirority 200
standby 1 preempt

# R2
int g0/0
standby version 2
standby 1 ip 10.0.1.254
standby 1 pirority 50

show standby

